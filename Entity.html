<html>
    <head>
        <script src="Lib_2D_JS_Biirra_Base.js"></script>
        <script src="Lib_2D_JS_Biirra_Input.js"></script>
        <script src="Lib_2D_JS_Biirra.js"></script>
    </head>
    <body>
        <canvas id="field" width="500" height="500"></canvas>
    </body>
    <script>
        class Mover extends Entity{
            constructor(options){
                super(options);
            }
            update(){
                super.update();
                this.angle = Math.atan2(this.velocity.y,this.velocity.x);
            }
        }

        let canvas = document.getElementById("field");
        let ctx = canvas.getContext("2d");
        ctx.width = 500;
        ctx.height = 500;

        let rectangleImg = new Image();
        rectangleImg.src = "assets/rectangle_black.png"; // source: https://s3.us-east-2.amazonaws.com/singular-assets/Global/Earth1024x1024_256Frames.png
        
        let osc = new Oscillator({
            context: ctx,
            img: rectangleImg,
            width: 16,      // width of the sprite
            height: 16,     // height of the sprite
            location:new Vector2d(100,100),
            mass: 0
        });

        let universe = new Sprite({
            width: 500,      // width of the sprite
            height: 500,     // height of the sprite
        });
        
        (function() {
            function gameLoop () {
                ctx.clearRect(0, 0, 500, 500);

                osc.update();
            
                osc.render();
                //rctangle.applyForce(Forces.wind);
                //rctangle.applyForce(Forces.gravity);

                checkEdges(osc, universe);
            }
            setInterval(gameLoop, 10);
        })();

        function checkEdges(entity, layer) {
            if (entity.location.x > layer.width) {
                entity.location.x = layer.width;
                entity.velocity.x *= -1;
            } else if (entity.location.x < 0) {
                entity.velocity.x *= -1;
                entity.location.x = 0;
            }
 
            if (entity.location.y > layer.height) {
                entity.velocity.y *= -1;
                entity.location.y = layer.height;
            }
        }
    </script>
</html>